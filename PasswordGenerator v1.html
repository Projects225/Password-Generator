<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password Generator v1</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3C?xml version='1.0' encoding='utf-8'?%3E%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3ClinearGradient id='RBZbGDlrJgwaS0JPaDcoma' x1='32.36' x2='15.528' y1='-594.36' y2='-577.528' gradientTransform='matrix(1 0 0 -1 0 -562)' gradientUnits='userSpaceOnUse'%3E%3Cstop offset='0' stop-color='%23fff'/%3E%3Cstop offset='0.242' stop-color='%23f2f2f2'/%3E%3Cstop offset='1' stop-color='%23ccc'/%3E%3C/linearGradient%3E%3Cg transform='matrix(0.749996, 0, 0, 0.749996, -3.214843, -3.542389)'%3E%3Cg transform='matrix(0.069614, 0, 0, 0.069614, 6.178815, -2.710896)'%3E%3Cg transform='matrix(9.033635, 0, 0, 9.033635, 178.656771, 298.439366)' style='transform-origin: 24px 23.92px;'%3E%3Ccircle cx='24' cy='24' r='12' fill='url(%23RBZbGDlrJgwaS0JPaDcoma)'/%3E%3Cpath fill='%23808991' d='M43.407,19.243c-2.389-0.029-4.702-1.274-5.983-3.493c-1.233-2.136-1.208-4.649-0.162-6.693 c-2.125-1.887-4.642-3.339-7.43-4.188C28.577,6.756,26.435,8,24,8s-4.577-1.244-5.831-3.131c-2.788,0.849-5.305,2.301-7.43,4.188 c1.046,2.044,1.071,4.557-0.162,6.693c-1.281,2.219-3.594,3.464-5.983,3.493C4.22,20.77,4,22.358,4,24 c0,1.284,0.133,2.535,0.364,3.752c2.469-0.051,4.891,1.208,6.213,3.498c1.368,2.37,1.187,5.204-0.22,7.345 c2.082,1.947,4.573,3.456,7.34,4.375C18.827,40.624,21.221,39,24,39s5.173,1.624,6.303,3.971c2.767-0.919,5.258-2.428,7.34-4.375 c-1.407-2.141-1.588-4.975-0.22-7.345c1.322-2.29,3.743-3.549,6.213-3.498C43.867,26.535,44,25.284,44,24 C44,22.358,43.78,20.77,43.407,19.243z M36,24c0,1.626-0.327,3.176-0.913,4.59l-5.166-3.66C29.968,24.626,30,24.317,30,24 c0-2.611-1.671-4.827-4-5.651V12.18C31.673,13.134,36,18.056,36,24z M22,12.18v6.169c-2.329,0.825-4,3.04-4,5.651 c0,0.317,0.032,0.626,0.079,0.93l-5.166,3.66C12.327,27.176,12,25.626,12,24C12,18.056,16.327,13.134,22,12.18z M24,36 c-3.561,0-6.75-1.56-8.948-4.023l4.953-3.509C21.066,29.418,22.464,30,24,30s2.934-0.582,3.995-1.532l4.953,3.509 C30.75,34.44,27.561,36,24,36z'/%3E%3C/g%3E%3C/g%3E%3C/g%3E%3Cg transform='matrix(0.062895, 0, 0, 0.061759, -4.100753, -8.757101)'%3E%3ClinearGradient id='d' x1='256' x2='256' y1='493.17' y2='332.86' gradientUnits='userSpaceOnUse'%3E%3Cstop offset='0' stop-color='%23d33535'/%3E%3Cstop offset='1' stop-color='%23f75c5c'/%3E%3C/linearGradient%3E%3ClinearGradient id='gradient-2' x1='256' x2='256' y1='457.72' y2='370.86' gradientUnits='userSpaceOnUse'%3E%3Cstop offset='0' stop-color='%23f75c5c'/%3E%3Cstop offset='1' stop-color='%23f79797'/%3E%3C/linearGradient%3E%3Cpath fill='url(%23d)' d='M366.65 332.86h-221.3c-44.2 0-80.15 35.96-80.15 80.15s35.96 80.15 80.15 80.15h221.29c44.2 0 80.15-35.96 80.15-80.15s-35.96-80.15-80.15-80.15z'/%3E%3Cpath fill='url(%23gradient-2)' d='M293.61 436.01a12.504 12.504 0 0 1-10.84 6.25c-2.12 0-4.27-.54-6.24-1.68l-8.04-4.64v9.28c0 6.9-5.6 12.5-12.5 12.5s-12.5-5.6-12.5-12.5v-9.28l-8.04 4.64a12.423 12.423 0 0 1-6.24 1.68c-4.32 0-8.52-2.24-10.84-6.25-3.45-5.98-1.4-13.62 4.58-17.08l8.04-4.64-8.04-4.64c-5.98-3.45-8.03-11.1-4.58-17.08s11.1-8.03 17.08-4.58l8.04 4.64v-9.28c0-6.9 5.6-12.5 12.5-12.5s12.5 5.6 12.5 12.5v9.28l8.04-4.64c5.98-3.45 13.62-1.4 17.08 4.58s1.4 13.62-4.58 17.08l-8.04 4.64 8.04 4.64c5.98 3.45 8.03 11.1 4.58 17.08zm87.72-17.08-8.04-4.64 8.04-4.64c5.98-3.45 8.03-11.1 4.58-17.08s-11.1-8.03-17.08-4.58l-8.04 4.64v-9.28c0-6.9-5.6-12.5-12.5-12.5s-12.5 5.6-12.5 12.5v9.28l-8.04-4.64c-5.98-3.45-13.62-1.4-17.08 4.58s-1.4 13.62 4.58 17.08l8.04 4.64-8.04-4.64c-5.98 3.45-8.03 11.1-4.58 17.08 2.32 4.01 6.52 6.25 10.84 6.25 2.12 0 4.27-.54 6.24-1.68l8.04-4.64v9.28c0 6.9 5.6 12.5 12.5 12.5s12.5-5.6 12.5-12.5v-9.28l8.04 4.64c1.97 1.14 4.12 1.68 6.24 1.68 4.32 0 8.52-2.24 10.84-6.25 3.45-5.98 1.4-13.62-4.58-17.08zm-184.59 0-8.04-4.64 8.04-4.64c5.98-3.45 8.03-11.1 4.58-17.08s-11.1-8.03-17.08-4.58l-8.04 4.64v-9.28c0-6.9-5.6-12.5-12.5-12.5s-12.5 5.6-12.5 12.5v9.28l-8.04-4.64c-5.98-3.45-13.62-1.4-17.08 4.58s-1.4 13.62 4.58 17.08l8.04 4.64-8.04-4.64c-5.98 3.45-8.03 11.1-4.58 17.08 2.32 4.01 6.52 6.25 10.84 6.25 2.12 0 4.27-.54 6.24-1.68l8.04-4.64v9.28c0 6.9 5.6 12.5 12.5 12.5s12.5-5.6 12.5-12.5v-9.28l8.04 4.64c1.97 1.14 4.12 1.68 6.24 1.68 4.32 0 8.52-2.24 10.84-6.25 3.45-5.98 1.4-13.62-4.58-17.08z'/%3E%3C/g%3E%3C/svg%3E">

    <style>
        :root {
            --bg: #f5f5f7; --cont: #ffffff; --txt: #1d1d1f; --label-txt: #1d1d1f;
            --input-bg: #f0f0f2; --btn-bg: #333; --pre-bg: #1e1e1e;
            --pass-red: #ff3b30; --gen-gray: #8e8e93;
        }
        [data-theme="dark"] {
            --bg: #121212; --cont: #1e1e1e; --txt: #f5f5f7; --label-txt: #ffffff;
            --input-bg: #2c2c2e; --btn-bg: #3a3a3c;
        }

        body {
            margin: 0; padding: 20px; font-family: 'Monaco', 'Consolas', monospace;
            background: var(--bg); color: var(--txt);
            display: flex; justify-content: center; align-items: center; min-height: 100vh;
        }

        .container {
            background: var(--cont); width: 100%; max-width: 1000px;
            padding: 40px; border-radius: 24px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5); position: relative;
        }

        .header { display: flex; align-items: center; gap: 15px; margin-bottom: 30px; }
        .logo-svg { width: 50px; height: 50px; }

        h2 { margin: 0; font-size: 28px; font-weight: 800; }
        .t-red { color: var(--pass-red); }
        .t-gray { color: var(--gen-gray); }

        .input-group { margin-bottom: 20px; }
        label { display: block; font-weight: bold; font-size: 16px; color: var(--label-txt); margin-bottom: 8px; text-transform: uppercase; }
        
        input {
            width: 100%; padding: 14px; border-radius: 10px; border: none;
            background: var(--input-bg); color: var(--txt); box-sizing: border-box; outline: none; font-size: 15px;
        }

        .actions { display: flex; gap: 15px; margin-top: 25px; }
        button.main-btn {
            flex: 1; padding: 15px; cursor: pointer; border: none; border-radius: 10px;
            background: #007aff; color: #fff; font-weight: bold; font-size: 16px;
        }

        .output-wrapper { position: relative; margin-top: 30px; }
        pre {
            background: var(--pre-bg); color: #ffffff; padding: 20px;
            border-radius: 12px; font-size: 14px; min-height: 100px;
            max-height: 500px; overflow-y: auto; border: 1px solid #333; margin: 0;
        }

        .copy-overlay-btn {
            position: absolute; top: 10px; right: 10px;
            background: #333; border: 1px solid #444; color: #fff;
            padding: 8px; border-radius: 6px; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            transition: all 0.2s; z-index: 10;
        }
        .copy-overlay-btn:hover { background: #444; }
        .copy-overlay-btn svg { width: 18px; height: 18px; fill: none; stroke: currentColor; stroke-width: 2; }

        .theme-toggle {
            position: absolute; top: 20px; right: 20px;
            background: none; border: 2px solid var(--pass-red); color: var(--txt);
            width: 44px; height: 44px; border-radius: 12px; cursor: pointer;
            display: flex; align-items: center; justify-content: center; transition: 0.2s;
        }
        .theme-toggle:hover { transform: scale(1.05); background: rgba(255, 59, 48, 0.1); }

        .output-line { display: flex; margin-bottom: 3px; }
        .line-number { color: #666; width: 3.5em; text-align: right; margin-right: 12px; user-select: none; }
        .encoded-text { flex: 1; word-break: break-all; white-space: pre-wrap; }
    </style>
</head>
<body data-theme="dark">

<div class="container">
    <button class="theme-toggle" onclick="toggleTheme()">
        <svg id="themeIcon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
    </button>

    <div class="header">
        <a href="index.html">
            <svg class="logo-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <linearGradient id="RBZbGDlrJgwaS0JPaDcoma" x1="32.36" x2="15.528" y1="-594.36" y2="-577.528" gradientTransform="matrix(1 0 0 -1 0 -562)" gradientUnits="userSpaceOnUse">
                    <stop offset="0" stop-color="#fff"/><stop offset="0.242" stop-color="#f2f2f2"/><stop offset="1" stop-color="#ccc"/>
                </linearGradient>
                <g transform="matrix(0.749996, 0, 0, 0.749996, -3.214843, -3.542389)">
                    <g transform="matrix(0.069614, 0, 0, 0.069614, 6.178815, -2.710896)">
                        <g transform="matrix(9.033635, 0, 0, 9.033635, 178.656771, 298.439366)" style="transform-origin: 24px 23.92px;">
                            <circle cx="24" cy="24" r="12" fill="url(#RBZbGDlrJgwaS0JPaDcoma)"/>
                            <path fill="#808991" d="M43.407,19.243c-2.389-0.029-4.702-1.274-5.983-3.493c-1.233-2.136-1.208-4.649-0.162-6.693 c-2.125-1.887-4.642-3.339-7.43-4.188C28.577,6.756,26.435,8,24,8s-4.577-1.244-5.831-3.131c-2.788,0.849-5.305,2.301-7.43,4.188 c1.046,2.044,1.071,4.557-0.162,6.693c-1.281,2.219-3.594,3.464-5.983,3.493C4.22,20.77,4,22.358,4,24 c0,1.284,0.133,2.535,0.364,3.752c2.469-0.051,4.891,1.208,6.213,3.498c1.368,2.37,1.187,5.204-0.22,7.345 c2.082,1.947,4.573,3.456,7.34,4.375C18.827,40.624,21.221,39,24,39s5.173,1.624,6.303,3.971c2.767-0.919,5.258-2.428,7.34-4.375 c-1.407-2.141-1.588-4.975-0.22-7.345c1.322-2.29,3.743-3.549,6.213-3.498C43.867,26.535,44,25.284,44,24 C44,22.358,43.78,20.77,43.407,19.243z M36,24c0,1.626-0.327,3.176-0.913,4.59l-5.166-3.66C29.968,24.626,30,24.317,30,24 c0-2.611-1.671-4.827-4-5.651V12.18C31.673,13.134,36,18.056,36,24z M22,12.18v6.169c-2.329,0.825-4,3.04-4,5.651 c0,0.317,0.032,0.626,0.079,0.93l-5.166,3.66C12.327,27.176,12,25.626,12,24C12,18.056,16.327,13.134,22,12.18z M24,36 c-3.561,0-6.75-1.56-8.948-4.023l4.953-3.509C21.066,29.418,22.464,30,24,30s2.934-0.582,3.995-1.532l4.953,3.509 C30.75,34.44,27.561,36,24,36z"/>
                        </g>
                    </g>
                </g>
                <g transform="matrix(0.062895, 0, 0, 0.061759, -4.100753, -8.757101)">
                    <linearGradient id="d" x1="256" x2="256" y1="493.17" y2="332.86" gradientUnits="userSpaceOnUse">
                        <stop offset="0" stop-color="#d33535"/><stop offset="1" stop-color="#f75c5c"/>
                    </linearGradient>
                    <linearGradient id="gradient-2" x1="256" x2="256" y1="457.72" y2="370.86" gradientUnits="userSpaceOnUse">
                        <stop offset="0" stop-color="#f75c5c"/><stop offset="1" stop-color="#f79797"/>
                    </linearGradient>
                    <path fill="url(#d)" d="M366.65 332.86h-221.3c-44.2 0-80.15 35.96-80.15 80.15s35.96 80.15 80.15 80.15h221.29c44.2 0 80.15-35.96 80.15-80.15s-35.96-80.15-80.15-80.15z"/>
                    <path fill="url(#gradient-2)" d="M293.61 436.01a12.504 12.504 0 0 1-10.84 6.25c-2.12 0-4.27-.54-6.24-1.68l-8.04-4.64v9.28c0 6.9-5.6 12.5-12.5 12.5s-12.5-5.6-12.5-12.5v-9.28l-8.04 4.64a12.423 12.423 0 0 1-6.24 1.68c-4.32 0-8.52-2.24-10.84-6.25-3.45-5.98-1.4-13.62 4.58-17.08l8.04-4.64-8.04-4.64c-5.98-3.45-8.03-11.1-4.58-17.08s11.1-8.03 17.08-4.58l8.04 4.64v-9.28c0-6.9 5.6-12.5 12.5-12.5s12.5 5.6 12.5 12.5v9.28l8.04-4.64c5.98-3.45 13.62-1.4 17.08 4.58s1.4 13.62-4.58 17.08l-8.04 4.64 8.04 4.64c5.98 3.45 8.03 11.1 4.58 17.08zm87.72-17.08-8.04-4.64 8.04-4.64c5.98-3.45 8.03-11.1 4.58-17.08s-11.1-8.03-17.08-4.58l-8.04 4.64v-9.28c0-6.9-5.6-12.5-12.5-12.5s-12.5 5.6-12.5 12.5v9.28l-8.04-4.64c-5.98-3.45-13.62-1.4-17.08 4.58s-1.4 13.62 4.58 17.08l8.04 4.64-8.04-4.64c-5.98 3.45-8.03 11.1-4.58 17.08 2.32 4.01 6.52 6.25 10.84 6.25 2.12 0 4.27-.54 6.24-1.68l8.04-4.64v9.28c0 6.9 5.6 12.5 12.5 12.5s12.5-5.6 12.5-12.5v-9.28l8.04 4.64c1.97 1.14 4.12 1.68 6.24 1.68 4.32 0 8.52-2.24 10.84-6.25 3.45-5.98 1.4-13.62-4.58-17.08zm-184.59 0-8.04-4.64 8.04-4.64c5.98-3.45 8.03-11.1 4.58-17.08s-11.1-8.03-17.08-4.58l-8.04 4.64v-9.28c0-6.9-5.6-12.5-12.5-12.5s-12.5 5.6-12.5 12.5v9.28l-8.04-4.64c-5.98-3.45-13.62-1.4-17.08 4.58s-1.4 13.62 4.58 17.08l8.04 4.64-8.04-4.64c-5.98 3.45-8.03 11.1-4.58 17.08 2.32 4.01 6.52 6.25 10.84 6.25 2.12 0 4.27-.54 6.24-1.68l8.04-4.64v9.28c0 6.9 5.6 12.5 12.5 12.5s12.5-5.6 12.5-12.5v-9.28l8.04 4.64c1.97 1.14 4.12 1.68 6.24 1.68 4.32 0 8.52-2.24 10.84-6.25 3.45-5.98 1.4-13.62-4.58-17.08z"/>
                </g>
            </svg>
        </a>
        <h2><span class="t-red">Password</span> <span class="t-gray">Generator</span> <span class="t-red">v1</span></h2>
    </div>

    <div class="input-group">
        <label>Key</label>
        <input type="text" id="text" placeholder="Enter text to encode">
    </div>

    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px;">
        <div class="input-group">
            <label>Times</label>
            <input type="number" id="times" min="1" value="1">
        </div>
        <div class="input-group">
            <label>Width</label>
            <input type="number" id="width" min="1" value="80">
        </div>
        <div class="input-group">
            <label>Row (Opt)</label>
            <input type="number" id="line" placeholder="All rows">
        </div>
    </div>

    <div class="actions">
        <button class="main-btn" onclick="encodeBase85()">ENCODE</button>
    </div>

    <div class="output-wrapper">
        <button class="copy-overlay-btn" id="overlayCopy" onclick="copyOutput()" title="Copy to clipboard">
            <svg id="copyIcon" viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
        </button>
        <pre id="output"></pre>
    </div>
</div>

<script>
    function toggleTheme() {
        const b = document.body;
        const n = b.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
        b.setAttribute('data-theme', n);
        localStorage.setItem('theme', n);
        updateThemeIcon(n);
    }

    function updateThemeIcon(theme) {
        const icon = document.getElementById('themeIcon');
        icon.innerHTML = theme === 'dark' 
            ? '<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>'
            : '<circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>';
    }

    document.body.setAttribute('data-theme', localStorage.getItem('theme') || 'dark');
    updateThemeIcon(localStorage.getItem('theme') || 'dark');

    const Z85_CHARS = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz!#$%&()*+-;<=>?@^_`{|}~";

    function z85Encode(bytes) {
        let r = bytes.length % 4;
        if (r !== 0) {
            let tmp = new Uint8Array(bytes.length + (4 - r));
            tmp.set(bytes); bytes = tmp;
        }
        let res = "";
        for (let i = 0; i < bytes.length; i += 4) {
            let v = (bytes[i] << 24) >>> 0 | (bytes[i+1] << 16) | (bytes[i+2] << 8) | (bytes[i+3]);
            let enc = "";
            for (let j = 0; j < 5; j++) { enc = Z85_CHARS[v % 85] + enc; v = Math.floor(v / 85); }
            res += enc;
        }
        return r !== 0 ? res.slice(0, res.length - (4 - r)) : res;
    }

    function encodeBase85() {
        let text = document.getElementById("text").value;
        let times = parseInt(document.getElementById("times").value) || 1;
        let width = parseInt(document.getElementById("width").value) || 80;
        let line = document.getElementById("line").value;
        let output = document.getElementById("output");

        if (!text) { output.textContent = "❗ ENTER KEY"; return; }

        let encoded = new TextEncoder().encode(text);
        for (let i = 0; i < times; i++) {
            encoded = new TextEncoder().encode(z85Encode(encoded));
        }
        let result = new TextDecoder().decode(encoded);
        let lines = [];
        for (let i = 0; i < result.length; i += width) lines.push(result.slice(i, i + width));

        output.innerHTML = "";
        if (line) {
            let n = parseInt(line);
            if (n >= 1 && n <= lines.length) renderLine(output, n, lines[n-1]);
            else output.textContent = `❗ LINE OUT OF RANGE (Max: ${lines.length})`;
        } else {
            lines.forEach((ln, i) => renderLine(output, i + 1, ln));
        }
    }

    function renderLine(container, num, text) {
        const div = document.createElement("div");
        div.className = "output-line";
        div.innerHTML = `<span class="line-number">${num}:</span><span class="encoded-text">${text}</span>`;
        container.appendChild(div);
    }

    function copyOutput() {
        const btn = document.getElementById("overlayCopy");
        const icon = document.getElementById("copyIcon");
        const content = Array.from(document.querySelectorAll(".encoded-text")).map(s => s.textContent).join("\n");
        
        if (!content) return;

        navigator.clipboard.writeText(content).then(() => {
            const originalColor = btn.style.color;
            const originalIcon = icon.innerHTML;

            btn.style.color = "#28a745"; // Zelená
            btn.style.borderColor = "#28a745";
            icon.innerHTML = '<polyline points="20 6 9 17 4 12"></polyline>'; // Checkmark icon

            setTimeout(() => {
                btn.style.color = "";
                btn.style.borderColor = "";
                icon.innerHTML = '<rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>';
            }, 1000);
        });
    }
</script>
</body>
</html>
