<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password Generator v2</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3C?xml version='1.0' encoding='utf-8'?%3E%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3ClinearGradient id='RBZbGDlrJgwaS0JPaDcoma' x1='32.36' x2='15.528' y1='-594.36' y2='-577.528' gradientTransform='matrix(1 0 0 -1 0 -562)' gradientUnits='userSpaceOnUse'%3E%3Cstop offset='0' stop-color='%23fff'/%3E%3Cstop offset='0.242' stop-color='%23f2f2f2'/%3E%3Cstop offset='1' stop-color='%23ccc'/%3E%3C/linearGradient%3E%3Cg transform='matrix(0.749996, 0, 0, 0.749996, -3.214843, -3.542389)'%3E%3Cg transform='matrix(0.069614, 0, 0, 0.069614, 6.178815, -2.710896)'%3E%3ClinearGradient id='e' x1='256' x2='256' y1='478.66' y2='288.73' gradientUnits='userSpaceOnUse'%3E%3Cstop offset='0' stop-color='%234ca342'/%3E%3Cstop offset='1' stop-color='%2354cc46'/%3E%3C/linearGradient%3E%3ClinearGradient id='b' x1='256' x2='256' y1='435.45' y2='335.05' gradientUnits='userSpaceOnUse'%3E%3Cstop offset='0' stop-color='%2362d154'/%3E%3Cstop offset='1' stop-color='%239ded93'/%3E%3C/linearGradient%3E%3ClinearGradient id='f' x1='368.5' x2='368.5' href='%23b'/%3E%3ClinearGradient id='g' x1='143.5' x2='143.5' href='%23b'/%3E%3Cg transform='matrix(9.033635, 0, 0, 9.033635, 178.656771, 298.439366)' style='transform-origin: 24px 23.92px;'%3E%3Ccircle cx='24' cy='24' r='12' fill='url(%23RBZbGDlrJgwaS0JPaDcoma)'/%3E%3Cpath fill='%23808991' d='M43.407,19.243c-2.389-0.029-4.702-1.274-5.983-3.493c-1.233-2.136-1.208-4.649-0.162-6.693 c-2.125-1.887-4.642-3.339-7.43-4.188C28.577,6.756,26.435,8,24,8s-4.577-1.244-5.831-3.131c-2.788,0.849-5.305,2.301-7.43,4.188 c1.046,2.044,1.071,4.557-0.162,6.693c-1.281,2.219-3.594,3.464-5.983,3.493C4.22,20.77,4,22.358,4,24 c0,1.284,0.133,2.535,0.364,3.752c2.469-0.051,4.891,1.208,6.213,3.498c1.368,2.37,1.187,5.204-0.22,7.345 c2.082,1.947,4.573,3.456,7.34,4.375C18.827,40.624,21.221,39,24,39s5.173,1.624,6.303,3.971c2.767-0.919,5.258-2.428,7.34-4.375 c-1.407-2.141-1.588-4.975-0.22-7.345c1.322-2.29,3.743-3.549,6.213-3.498C43.867,26.535,44,25.284,44,24 C44,22.358,43.78,20.77,43.407,19.243z M36,24c0,1.626-0.327,3.176-0.913,4.59l-5.166-3.66C29.968,24.626,30,24.317,30,24 c0-2.611-1.671-4.827-4-5.651V12.18C31.673,13.134,36,18.056,36,24z M22,12.18v6.169c-2.329,0.825-4,3.04-4,5.651 c0,0.317,0.032,0.626,0.079,0.93l-5.166,3.66C12.327,27.176,12,25.626,12,24C12,18.056,16.327,13.134,22,12.18z M24,36 c-3.561,0-6.75-1.56-8.948-4.023l4.953-3.509C21.066,29.418,22.464,30,24,30s2.934-0.582,3.995-1.532l4.953,3.509 C30.75,34.44,27.561,36,24,36z'/%3E%3C/g%3E%3Cg transform='matrix(1, 0, 0, 1, -53.343224, 44.33117)'%3E%3Cpath fill='url(%23e)' d='M390.87 288.73H121.13c-52.36 0-94.97 42.6-94.97 94.97s42.6 94.97 94.97 94.97h269.74c52.36 0 94.97-42.6 94.97-94.97s-42.6-94.97-94.97-94.97z'/%3E%3Cpath fill='url(%23b)' d='m294.9 393.28-13.9-8.03 13.9-8.03c5.98-3.45 8.03-11.1 4.58-17.08s-11.1-8.03-17.08-4.58l-13.9 8.03v-16.05c0-6.9-5.6-12.5-12.5-12.5s-12.5 5.6-12.5 12.5v16.05l-13.9-8.03c-5.98-3.45-13.62-1.4-17.08 4.58s-1.4 13.62 4.58 17.08l13.9 8.03-13.9 8.03c-5.98 3.45-8.03 11.1-4.58 17.08 2.32 4.01 6.52 6.25 10.84 6.25 2.12 0 4.27-.54 6.24-1.68l13.9-8.03v16.05c0 6.9 5.6 12.5 12.5 12.5s12.5-5.6 12.5-12.5V406.9l13.9 8.03c1.97 1.14 4.12 1.68 6.24 1.68 4.32 0 8.52-2.24 10.84-6.25 3.45-5.98 1.4-13.62-4.58-17.08z'/%3E%3Cpath fill='url(%23f)' d='m407.4 393.28-13.9-8.03 13.9-8.03c5.98-3.45 8.03-11.1 4.58-17.08s-11.1-8.03-17.08-4.58l-13.9 8.03v-16.05c0-6.9-5.6-12.5-12.5-12.5s-12.5 5.6-12.5 12.5v16.05l-13.9-8.03c-5.98-3.45-13.62-1.4-17.08 4.58-3.45 5.98-1.4 13.62 4.58 17.08l13.9 8.03-13.9 8.03c-5.98 3.45-8.03 11.1-4.58 17.08 2.32 4.01 6.52 6.25 10.84 6.25 2.12 0 4.27-.54 6.24-1.68l13.9-8.03v16.05c0 6.9 5.6 12.5 12.5 12.5s12.5-5.6 12.5-12.5V406.9l13.9 8.03c1.97 1.14 4.12 1.68 6.24 1.68 4.32 0 8.52-2.24 10.84-6.25 3.45-5.98 1.4-13.62-4.58-17.08z'/%3E%3Cpath fill='url(%23g)' d='m182.4 393.28-13.9-8.03 13.9-8.03c5.98-3.45 8.03-11.1 4.58-17.08s-11.1-8.03-17.08-4.58l-13.9 8.03v-16.05c0-6.9-5.6-12.5-12.5-12.5s-12.5 5.6-12.5 12.5v16.05l-13.9-8.03c-5.98-3.45-13.62-1.4-17.08 4.58-3.45 5.98-1.4 13.62 4.58 17.08l13.9 8.03-13.9 8.03c-5.98 3.45-8.03 11.1-4.58 17.08 2.32 4.01 6.52 6.25 10.84 6.25 2.12 0 4.27-.54 6.24-1.68l13.9-8.03v16.05c0 6.9 5.6 12.5 12.5 12.5s12.5-5.6 12.5-12.5V406.9l13.9 8.03c1.97 1.14 4.12 1.68 6.24 1.68 4.32 0 8.52-2.24 10.84-6.25 3.45-5.98 1.4-13.62-4.58-17.08z'/%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E">

    <style>
        :root {
            --bg: #121212;
            --cont: #1e1e1e;
            --txt: #f5f5f7;
            --label-txt: #ffffff;
            --input-bg: #2c2c2e;
            --btn-bg: #3a3a3c;
            --pass-green: #00ce0a;
            --gen-gray: #8e8e93;
            --pre-bg: #1a1a1a;
            --pre-border: #333;
        }

        body.light-mode {
            --bg: #f5f5f7;
            --cont: #ffffff;
            --txt: #1d1d1f;
            --label-txt: #1d1d1f;
            --input-bg: #f0f0f2;
            --btn-bg: #e5e5ea;
            --pre-bg: #f9f9fb;
            --pre-border: #ddd;
        }

        body {
            margin: 0; padding: 20px; font-family: 'Monaco', 'Consolas', monospace;
            background: var(--bg); color: var(--txt);
            display: flex; justify-content: center; align-items: center; min-height: 100vh;
            transition: background 0.3s, color 0.3s;
        }

        .container {
            background: var(--cont); width: 100%; max-width: 1000px;
            padding: 40px; border-radius: 24px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3); position: relative;
            transition: background 0.3s;
        }

        .header { display: flex; align-items: center; gap: 15px; margin-bottom: 30px; }
        .logo-svg { width: 50px; height: 50px; }

        h2 { margin: 0; font-size: 28px; font-weight: 800; }
        .t-green { color: var(--pass-green); }
        .t-gray { color: var(--gen-gray); }

        .input-group { margin-bottom: 20px; }
        label { display: block; font-weight: bold; font-size: 14px; color: var(--label-txt); margin-bottom: 8px; text-transform: uppercase; }
        .necessary { color: #ff3b30; }

        input, textarea {
            width: 100%; padding: 14px; border-radius: 10px; border: 1px solid transparent;
            background: var(--input-bg); color: var(--txt); box-sizing: border-box; outline: none; font-size: 15px;
            font-family: inherit; transition: background 0.2s;
        }
        input:focus, textarea:focus { border-color: var(--pass-green); }
        textarea { height: 80px; resize: vertical; }

        .seed-row { display: flex; gap: 10px; align-items: stretch; }
        #clearSeedBtn { 
            background: #ff3b30; color: white; border: none; border-radius: 10px; 
            padding: 0 15px; cursor: pointer; font-weight: bold; 
            display: flex; align-items: center; gap: 8px;
        }

        .actions { display: flex; gap: 15px; margin-top: 25px; }
        button.main-btn {
            flex: 1; padding: 15px; cursor: pointer; border: none; border-radius: 10px;
            background: var(--pass-green); color: #000; font-weight: bold; font-size: 16px;
            display: flex; align-items: center; justify-content: center; gap: 10px;
            transition: opacity 0.2s;
        }
        button.main-btn:hover { opacity: 0.9; }

        .btn-stroke { width: 20px; height: 20px; fill: none; stroke: currentColor; stroke-width: 2; }

        .output-wrapper { position: relative; margin-top: 30px; }
        pre {
            background: var(--pre-bg); color: var(--txt); padding: 20px;
            border-radius: 12px; font-size: 14px; min-height: 120px;
            max-height: 500px; overflow-y: auto; border: 1px solid var(--pre-border); margin: 0;
            transition: background 0.3s;
        }

        .copy-overlay-btn {
            position: absolute; top: 10px; right: 10px;
            background: var(--btn-bg); border: 1px solid var(--pre-border); color: var(--txt);
            padding: 8px; border-radius: 6px; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            transition: all 0.2s; z-index: 10;
        }

        /* Dark Mode Button s animáciou */
        .theme-toggle {
            position: absolute; top: 20px; right: 20px;
            background: none; border: 2px solid var(--pass-green); color: var(--txt);
            width: 44px; height: 44px; border-radius: 12px; cursor: pointer;
            display: flex; align-items: center; justify-content: center; 
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275), color 0.2s, border-color 0.2s;
        }
        .theme-toggle:hover {
            transform: scale(1.1);
        }
        .theme-toggle:active {
            transform: scale(0.95);
        }

        .output-line { display: flex; margin-bottom: 3px; }
        .line-number { color: var(--gen-gray); width: 3.5em; text-align: right; margin-right: 12px; user-select: none; }
        .encoded-text { flex: 1; word-break: break-all; white-space: pre-wrap; }
    </style>
</head>
<body class="dark-mode">

<div class="container">
    <button class="theme-toggle" id="themeBtn" title="Prepnúť režim">
        <svg id="themeIcon" class="btn-stroke" viewBox="0 0 24 24"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
    </button>

    <div class="header">
        <a href="index.html">
            <svg class="logo-svg" viewBox="0 0 24 24">
                <linearGradient id="RBZbGDlrJgwaS0JPaDcoma" x1="32.36" x2="15.528" y1="-594.36" y2="-577.528" gradientTransform="matrix(1 0 0 -1 0 -562)" gradientUnits="userSpaceOnUse">
                    <stop offset="0" stop-color="#fff"/><stop offset="0.242" stop-color="#f2f2f2"/><stop offset="1" stop-color="#ccc"/>
                </linearGradient>
                <g transform="matrix(0.749996, 0, 0, 0.749996, -3.214843, -3.542389)">
                    <g transform="matrix(0.069614, 0, 0, 0.069614, 6.178815, -2.710896)">
                        <linearGradient id="e" x1="256" x2="256" y1="478.66" y2="288.73" gradientUnits="userSpaceOnUse">
                            <stop offset="0" stop-color="#4ca342"/><stop offset="1" stop-color="#54cc46"/>
                        </linearGradient>
                        <linearGradient id="b" x1="256" x2="256" y1="435.45" y2="335.05" gradientUnits="userSpaceOnUse">
                            <stop offset="0" stop-color="#62d154"/><stop offset="1" stop-color="#9ded93"/>
                        </linearGradient>
                        <linearGradient id="f" x1="368.5" x2="368.5" href="#b"/>
                        <linearGradient id="g" x1="143.5" x2="143.5" href="#b"/>
                        <g transform="matrix(9.033635, 0, 0, 9.033635, 178.656771, 298.439366)" style="transform-origin: 24px 23.92px;">
                            <circle cx="24" cy="24" r="12" fill="url(#RBZbGDlrJgwaS0JPaDcoma)"/>
                            <path fill="#808991" d="M43.407,19.243c-2.389-0.029-4.702-1.274-5.983-3.493c-1.233-2.136-1.208-4.649-0.162-6.693 c-2.125-1.887-4.642-3.339-7.43-4.188C28.577,6.756,26.435,8,24,8s-4.577-1.244-5.831-3.131c-2.788,0.849-5.305,2.301-7.43,4.188 c1.046,2.044,1.071,4.557-0.162,6.693c-1.281,2.219-3.594,3.464-5.983,3.493C4.22,20.77,4,22.358,4,24 c0,1.284,0.133,2.535,0.364,3.752c2.469-0.051,4.891,1.208,6.213,3.498c1.368,2.37,1.187,5.204-0.22,7.345 c2.082,1.947,4.573,3.456,7.34,4.375C18.827,40.624,21.221,39,24,39s5.173,1.624,6.303,3.971c2.767-0.919,5.258-2.428,7.34-4.375 c-1.407-2.141-1.588-4.975-0.22-7.345c1.322-2.29,3.743-3.549,6.213-3.498C43.867,26.535,44,25.284,44,24 C44,22.358,43.78,20.77,43.407,19.243z M36,24c0,1.626-0.327,3.176-0.913,4.59l-5.166-3.66C29.968,24.626,30,24.317,30,24 c0-2.611-1.671-4.827-4-5.651V12.18C31.673,13.134,36,18.056,36,24z M22,12.18v6.169c-2.329,0.825-4,3.04-4,5.651 c0,0.317,0.032,0.626,0.079,0.93l-5.166,3.66C12.327,27.176,12,25.626,12,24C12,18.056,16.327,13.134,22,12.18z M24,36 c-3.561,0-6.75-1.56-8.948-4.023l4.953-3.509C21.066,29.418,22.464,30,24,30s2.934-0.582,3.995-1.532l4.953,3.509 C30.75,34.44,27.561,36,24,36z"/>
                        </g>
                        <g transform="matrix(1, 0, 0, 1, -53.343224, 44.33117)">
                            <path fill="url(#e)" d="M390.87 288.73H121.13c-52.36 0-94.97 42.6-94.97 94.97s42.6 94.97 94.97 94.97h269.74c52.36 0 94.97-42.6 94.97-94.97s-42.6-94.97-94.97-94.97z"/>
                            <path fill="url(#b)" d="m294.9 393.28-13.9-8.03 13.9-8.03c5.98-3.45 8.03-11.1 4.58-17.08s-11.1-8.03-17.08-4.58l-13.9 8.03v-16.05c0-6.9-5.6-12.5-12.5-12.5s-12.5 5.6-12.5 12.5v16.05l-13.9-8.03c-5.98-3.45-13.62-1.4-17.08 4.58s-1.4 13.62 4.58 17.08l13.9 8.03-13.9 8.03c-5.98 3.45-8.03 11.1-4.58 17.08 2.32 4.01 6.52 6.25 10.84 6.25 2.12 0 4.27-.54 6.24-1.68l13.9-8.03v16.05c0 6.9 5.6 12.5 12.5 12.5s12.5-5.6 12.5-12.5V406.9l13.9 8.03c1.97 1.14 4.12 1.68 6.24 1.68 4.32 0 8.52-2.24 10.84-6.25 3.45-5.98 1.4-13.62-4.58-17.08z"/>
                            <path fill="url(#f)" d="m407.4 393.28-13.9-8.03 13.9-8.03c5.98-3.45 8.03-11.1 4.58-17.08s-11.1-8.03-17.08-4.58l-13.9 8.03v-16.05c0-6.9-5.6-12.5-12.5-12.5s-12.5 5.6-12.5 12.5v16.05l-13.9-8.03c-5.98-3.45-13.62-1.4-17.08 4.58-3.45 5.98-1.4 13.62 4.58 17.08l13.9 8.03-13.9 8.03c-5.98 3.45-8.03 11.1-4.58 17.08 2.32 4.01 6.52 6.25 10.84 6.25 2.12 0 4.27-.54 6.24-1.68l13.9-8.03v16.05c0 6.9 5.6 12.5 12.5 12.5s12.5-5.6 12.5-12.5V406.9l13.9 8.03c1.97 1.14 4.12 1.68 6.24 1.68 4.32 0 8.52-2.24 10.84-6.25 3.45-5.98 1.4-13.62-4.58-17.08z"/>
                            <path fill="url(#g)" d="m182.4 393.28-13.9-8.03 13.9-8.03c5.98-3.45 8.03-11.1 4.58-17.08s-11.1-8.03-17.08-4.58l-13.9 8.03v-16.05c0-6.9-5.6-12.5-12.5-12.5s-12.5 5.6-12.5 12.5v16.05l-13.9-8.03c-5.98-3.45-13.62-1.4-17.08 4.58-3.45 5.98-1.4 13.62 4.58 17.08l13.9 8.03-13.9 8.03c-5.98 3.45-8.03 11.1-4.58 17.08 2.32 4.01 6.52 6.25 10.84 6.25 2.12 0 4.27-.54 6.24-1.68l13.9-8.03v16.05c0 6.9 5.6 12.5 12.5 12.5s12.5-5.6 12.5-12.5V406.9l13.9 8.03c1.97 1.14 4.12 1.68 6.24 1.68 4.32 0 8.52-2.24 10.84-6.25 3.45-5.98 1.4-13.62-4.58-17.08z"/>
                        </g>
                    </g>
                </g>
            </svg>
        </a>
        <h2><span class="t-green">Password</span> <span class="t-gray">Generator</span> <span class="t-green">v2</span></h2>
    </div>

    <div class="input-group">
        <label><span class="necessary">*</span> Key</label>
        <textarea id="inputText" placeholder="Zadajte váš kľúč"></textarea>
    </div>

    <div class="input-group">
        <label>Seed (Voliteľné)</label>
        <div class="seed-row">
            <input type="text" id="seedInput" placeholder="Predvolený seed">
            <button id="clearSeedBtn">
                <svg class="btn-stroke" viewBox="0 0 24 24"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                ZMAZAŤ
            </button>
        </div>
    </div>

    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px;">
        <div class="input-group">
            <label><span class="necessary">*</span> Dĺžka (x1000)</label>
            <input type="number" id="length" value="3" min="1">
        </div>
        <div class="input-group">
            <label><span class="necessary">*</span> Znakov na riadok</label>
            <input type="number" id="lineLength" value="80" min="1">
        </div>
        <div class="input-group">
            <label>Konkrétny riadok</label>
            <input type="number" id="specificLine" placeholder="Všetky" min="1">
        </div>
    </div>

    <div class="actions">
        <button class="main-btn" id="generateBtn">
            <svg class="btn-stroke" viewBox="0 0 24 24"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path></svg>
            GENEROVAŤ
        </button>
    </div>

    <div class="output-wrapper">
        <button class="copy-overlay-btn" id="overlayCopy" title="Kopírovať">
            <svg id="copyIcon" class="btn-stroke" viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
        </button>
        <pre id="output"></pre>
    </div>
</div>

<script>
    const DEFAULT_SEED = 'DefaultSeed123';
    const body = document.body;
    const themeBtn = document.getElementById('themeBtn');
    const themeIcon = document.getElementById('themeIcon');

    function setTheme(mode) {
        if (mode === 'light') {
            body.classList.add('light-mode');
            themeIcon.innerHTML = '<circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>';
        } else {
            body.classList.remove('light-mode');
            themeIcon.innerHTML = '<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>';
        }
        localStorage.setItem('theme', mode);
    }

    themeBtn.addEventListener('click', () => {
        const isLight = body.classList.contains('light-mode');
        setTheme(isLight ? 'dark' : 'light');
    });

    // Predvolená téma Dark (kontrola pamäte alebo default dark)
    const savedTheme = localStorage.getItem('theme') || 'dark';
    setTheme(savedTheme);

    function mulberry32(a) {
        return function() {
            var t = a += 0x6D2B79F5;
            t = Math.imul(t ^ (t >>> 15), t | 1);
            t ^= t + Math.imul(t ^ (t >>> 7), t | 61);
            return ((t ^ (t >>> 14)) >>> 0) / 4294967296;
        }
    }

    function generateRandomText(seed, length) {
        let numSeed = 0;
        for (let i = 0; i < seed.length; i++) numSeed += seed.charCodeAt(i) * (i + 1);
        const rand = mulberry32(numSeed);
        const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!#$%^&*()_[]{}|;:,.<>?~';
        let output = '';
        for (let i = 0; i < length; i++) output += chars.charAt(Math.floor(rand() * chars.length));
        return output;
    }

    document.getElementById('generateBtn').addEventListener('click', () => {
        const inputText = document.getElementById('inputText').value || 'default';
        const lengthCount = (parseInt(document.getElementById('length').value) || 3) * 1000;
        const lineLen = parseInt(document.getElementById('lineLength').value) || 80;
        const specLine = parseInt(document.getElementById('specificLine').value) || null;
        
        let seed = document.getElementById('seedInput').value || DEFAULT_SEED;
        const raw = generateRandomText(seed + inputText, lengthCount);
        
        const lines = [];
        for (let i = 0; i < raw.length; i += lineLen) lines.push(raw.slice(i, i + lineLen));

        const outputDiv = document.getElementById('output');
        outputDiv.innerHTML = '';

        const toDisplay = specLine ? (lines[specLine-1] ? [{n: specLine, t: lines[specLine-1]}] : []) : lines.map((l, i) => ({n: i+1, t: l}));

        toDisplay.forEach(item => {
            const div = document.createElement("div");
            div.className = "output-line";
            div.innerHTML = `<span class="line-number">${item.n}:</span><span class="encoded-text">${item.t}</span>`;
            outputDiv.appendChild(div);
        });
    });

    document.getElementById('overlayCopy').addEventListener('click', () => {
        const content = Array.from(document.querySelectorAll(".encoded-text")).map(s => s.textContent).join("\n");
        if (!content) return;
        navigator.clipboard.writeText(content).then(() => {
            const icon = document.getElementById("copyIcon");
            icon.innerHTML = '<polyline points="20 6 9 17 4 12"></polyline>';
            setTimeout(() => {
                icon.innerHTML = '<rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>';
            }, 1000);
        });
    });

    document.getElementById('clearSeedBtn').addEventListener('click', () => {
        document.getElementById('seedInput').value = '';
    });
</script>
</body>
</html>
